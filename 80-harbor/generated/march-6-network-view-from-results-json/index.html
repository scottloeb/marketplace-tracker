<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neo4j Graph Visualization: Relationship Diversity</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        header {
            text-align: center;
            margin-bottom: 20px;
        }
        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        .visualization-container {
            position: relative;
            width: 1000px;
            height: 800px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        .status {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 4px;
            font-size: 14px;
        }
        .legend {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        .legend h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        .two-column {
            display: flex;
            gap: 20px;
        }
        .column {
            flex: 1;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        .count-badge {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 6px;
        }
        .analysis {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        .analysis h2 {
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        .visual-encoding {
            margin-top: 20px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
        }
        .visual-encoding h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        @media (max-width: 1100px) {
            .visualization-container {
                width: 100%;
                height: 600px;
            }
            .two-column {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Neo4j Graph Visualization: Relationship Diversity</h1>
    </header>

    <main>
        <div class="visualization-container">
            <canvas id="graphCanvas" width="1000" height="800"></canvas>
            <div class="status" id="statusDisplay"></div>
        </div>

        <div class="legend">
            <div class="two-column">
                <div class="column">
                    <h2>Node Types</h2>
                    <div id="nodeLegend"></div>
                </div>
                <div class="column">
                    <h2>Relationship Types</h2>
                    <div id="relationshipLegend"></div>
                </div>
            </div>
        </div>

        <div class="analysis">
            <h2>Analysis: Relationship Diversity in Graph Databases</h2>
            <p>
                This visualization demonstrates one of the key strengths of graph databases: their ability to model diverse, semantically rich relationships between entities. Unlike traditional relational databases where relationships are implicit through foreign keys, graph databases make relationships first-class citizens with their own properties and types.
            </p>
            <p>
                In this dataset (derived from a conversational memory structure), we can observe:
            </p>
            <ul>
                <li><strong>Multiple relationship types</strong> between the same kinds of nodes, showing how different cognitive processes interact</li>
                <li><strong>Property-rich relationships</strong> containing meaningful attributes beyond just connecting nodes</li>
                <li><strong>Directional semantics</strong> where the direction of relationships carries important meaning (e.g., which concept activates another)</li>
                <li><strong>Network structure</strong> revealing patterns of connectivity that would be difficult to discern in a tabular format</li>
            </ul>
            <p>
                The force-directed layout organizes nodes based on their connectivity, bringing closely related concepts together while pushing less related ones apart. This naturally reveals community structures and relationship patterns within the conversational memory graph.
            </p>
            
            <div class="visual-encoding">
                <h3>Visual Encoding Details</h3>
                <p>The visualization uses the following visual encoding principles:</p>
                <ul>
                    <li><strong>Node colors</strong> represent different node types (Concept, Message, Topic, etc.)</li>
                    <li><strong>Node size</strong> corresponds to importance or encoding strength of the concept/memory</li>
                    <li><strong>Edge colors</strong> represent different relationship types</li>
                    <li><strong>Edge thickness</strong> corresponds to relationship strength (e.g., association_strength, dissonance_level)</li>
                    <li><strong>Arrows</strong> indicate the direction of the relationship</li>
                </ul>
                <p>
                    This encoding helps highlight the diversity and semantic richness of relationships in the graph database, making it possible to identify patterns at a glance that would require complex queries in traditional databases.
                </p>
            </div>
        </div>
    </main>

    <!-- Replace the entire script block with a single import -->
    <script type="module" src="main.js"></script>
</body>
</html>